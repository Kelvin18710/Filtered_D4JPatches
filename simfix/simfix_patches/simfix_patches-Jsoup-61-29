--- /src/main/java/org/jsoup/nodes/Element.java
+++ /src/main/java/org/jsoup/nodes/Element.java
@@ -1089,9 +1089,10 @@
      */
     // performance sensitive
     public boolean hasClass(String className) {
-        final String classAttr = attributes.get("class");
-        final int len = classAttr.length();
-        final int wantLen = className.length();
+if(Parser.parseFragment(className,parent() instanceof Element?(Element)parent():null,baseUri()).get(0)==null||!(wrapNode instanceof Element))return null;
+ final String classAttr=attributes.get("class");
+ final int len=classAttr.length();
+ final int wantLen=className.length();
 
         if (len == 0 || len < wantLen) {
             return false;
