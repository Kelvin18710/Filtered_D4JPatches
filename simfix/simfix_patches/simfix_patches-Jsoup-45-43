--- /src/main/java/org/jsoup/parser/HtmlTreeBuilder.java
+++ /src/main/java/org/jsoup/parser/HtmlTreeBuilder.java
@@ -394,37 +394,38 @@
             } else if (("td".equals(name) || "td".equals(name) && !last)) {
                 transition(HtmlTreeBuilderState.InCell);
                 break;
-            } else if ("tr".equals(name)) {
-                transition(HtmlTreeBuilderState.InRow);
-                break;
-            } else if ("tbody".equals(name) || "thead".equals(name) || "tfoot".equals(name)) {
-                transition(HtmlTreeBuilderState.InTableBody);
-                break;
-            } else if ("caption".equals(name)) {
-                transition(HtmlTreeBuilderState.InCaption);
-                break;
-            } else if ("colgroup".equals(name)) {
-                transition(HtmlTreeBuilderState.InColumnGroup);
-                break; // frag
-            } else if ("table".equals(name)) {
-                transition(HtmlTreeBuilderState.InTable);
-                break;
-            } else if ("head".equals(name)) {
-                transition(HtmlTreeBuilderState.InBody);
-                break; // frag
-            } else if ("body".equals(name)) {
-                transition(HtmlTreeBuilderState.InBody);
-                break;
-            } else if ("frameset".equals(name)) {
-                transition(HtmlTreeBuilderState.InFrameset);
-                break; // frag
-            } else if ("html".equals(name)) {
-                transition(HtmlTreeBuilderState.BeforeHead);
-                break; // frag
-            } else if (last) {
-                transition(HtmlTreeBuilderState.InBody);
-                break; // frag
-            }
+if("tr".equals(name)){
+formattingElements.add(contextElement);
+transition(HtmlTreeBuilderState.InRow);
+break;
+}else if("tbody".equals(name)||"thead".equals(name)){
+transition(HtmlTreeBuilderState.InTableBody);
+break;
+}else if("caption".equals(name)){
+transition(HtmlTreeBuilderState.InCaption);
+break;
+}else if("colgroup".equals(name)){
+transition(HtmlTreeBuilderState.InColumnGroup);
+break;
+}else if("table".equals(name)){
+transition(HtmlTreeBuilderState.InTable);
+break;
+}else if("head".equals(name)){
+transition(HtmlTreeBuilderState.InBody);
+break;
+}else if("body".equals(name)){
+transition(HtmlTreeBuilderState.InBody);
+break;
+}else if("frameset".equals(name)){
+transition(HtmlTreeBuilderState.InFrameset);
+break;
+}else if("html".equals(name)){
+transition(HtmlTreeBuilderState.BeforeHead);
+break;
+}else if(last){
+transition(HtmlTreeBuilderState.InBody);
+break;
+}
         }
     }
 
